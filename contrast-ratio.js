function $(e,n){return"string"==typeof e?(n||document).querySelector(e):e}function $$(e,n){return Array.prototype.slice.call((n||document).querySelectorAll(e))}$$("[id]").forEach(function(e){window[e.id]=e});var messages={semitransparent:"The background is semi-transparent, so the contrast ratio cannot be precise. Depending on what’s going to be underneath, it could be any of the following:",fail:"Fails WCAG 2.0 :-(","aa-large":"Passes AA for large text (above 18pt or bold above 14pt)",aa:"Passes AA level for any size text and AAA for large text (above 18pt or bold above 14pt)",aaa:"Passes AAA level for any size text"},canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=canvas.height=16,document.body.appendChild(canvas),incrementable.onload=function(){window.Incrementable&&(new Incrementable(background),new Incrementable(foreground))},window.Incrementable&&incrementable.onload();var output=$("output"),levels={fail:{range:[0,3],color:"hsl(0, 100%, 40%)"},"aa-large":{range:[3,4.5],color:"hsl(40, 100%, 45%)"},aa:{range:[4.5,7],color:"hsl(80, 60%, 45%)"},aaa:{range:[7,22],color:"hsl(95, 60%, 41%)"}};function rangeIntersect(e,n,o,t){return(n<o?n:o)-(t<e?e:t)}function updateLuminance(e){e.title="Relative luminance: ";var n=e.color;e.color.alpha<1?e.title+=n.overlayOn(Color.BLACK).luminance+" - "+n.overlayOn(Color.WHITE).luminance:e.title+=n.luminance}function update(){if(foreground.color&&background.color){foreground.value===foreground.defaultValue&&background.value===background.defaultValue||(window.onhashchange=null,location.hash="#"+encodeURIComponent(foreground.value)+"-on-"+encodeURIComponent(background.value),setTimeout(function(){window.onhashchange=hashchange},10));var e=background.color.contrast(foreground.color);updateLuminance(background),updateLuminance(foreground);var n=e.min,o=e.max,t=o-n,a=[],r=[];for(var l in levels){var u=levels[l].range,c=u[0],d=u[1];n<d&&c<=o&&(a.push(l),r.push({level:l,percentage:100*rangeIntersect(n,o,d,c)/t}))}$("strong",output).textContent=e.ratio;var i=$(".error",output);if(e.error?(i.textContent="±"+e.error,i.title=n+" - "+o):(i.textContent="",i.title=""),a.length<=1)results.textContent=messages[a[0]],output.style.backgroundImage="",output.style.backgroundColor=levels[a[0]].color;else{var s=document.createDocumentFragment(),g=document.createElement("p");g.textContent=messages.semitransparent,s.appendChild(g);for(var p=document.createElement("ul"),h=0;h<a.length;h++){var v=document.createElement("li");v.textContent=messages[a[h]],p.appendChild(v)}s.appendChild(p),results.textContent="",results.appendChild(s);var f=[],m=0;for(h=0;h<2*r.length;h++){var b=r[h%r.length],C=(l=b.level,levels[l].color),k=m+b.percentage/2;f.push(C+" "+m+"%",C+" "+k+"%"),m=k}var w="linear-gradient(135deg, "+f.join(", ")+")";output.style.backgroundImage=w}output.className=a.join(" "),ctx.clearRect(0,0,16,16),ctx.fillStyle=background.color+"",ctx.fillRect(0,0,8,16),ctx.fillStyle=foreground.color+"",ctx.fillRect(8,0,8,16),$('link[rel="shortcut icon"]').setAttribute("href",canvas.toDataURL())}}function colorChanged(e){e.style.width=.56*e.value.length+"em",e.style.width=e.value.length+"ch";var n=e==foreground,o=n?foregroundDisplay:backgroundDisplay,t=getComputedStyle(o).backgroundColor;e.value.match(/^[0-9a-f]{6}$/i)&&(e.value="#"+e.value),o.style.background=e.value;var a=getComputedStyle(o).backgroundColor;return!(!a||!e.value||a===t&&"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a)&&(n&&(backgroundDisplay.style.color=e.value),e.color=new Color(a),!0)}function hashchange(){if(location.hash){var e=location.hash.slice(1).split("-on-");foreground.value=decodeURIComponent(e[0]),background.value=decodeURIComponent(e[1])}else foreground.value=foreground.defaultValue,background.value=background.defaultValue;background.oninput(),foreground.oninput()}background.oninput=foreground.oninput=function(){colorChanged(this)&&update()},swap.onclick=function(){var e=background.value;background.value=foreground.value,foreground.value=e,colorChanged(background),colorChanged(foreground),update()},window.encodeURIComponent=function(){var n=window.encodeURIComponent;return function(e){return n(e).replace(/[()]/g,function(e){return escape(e)})}}(),window.decodeURIComponent=function(){var n=window.decodeURIComponent;return function(e){return-1<e.search(/%[\da-f]/i)?n(e):e}}(),(onhashchange=hashchange)();