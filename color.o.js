!function(){var c=self.Color=function(r){if("transparent"===r)r=[0,0,0,0];else if("string"==typeof r){var a=r;if(!(r=a.match(/rgba?\(([\d.]+), ([\d.]+), ([\d.]+)(?:, ([\d.]+))?\)/)))throw new Error("Invalid string: "+a);r.shift()}void 0===r[3]&&(r[3]=1),r=r.map(function(r){return floor(r,3)}),this.rgba=r};function floor(r,a){a=+a||0;var t=Math.pow(10,a);return Math.floor(r*t)/t}c.prototype={get rgb(){return this.rgba.slice(0,3)},get alpha(){return this.rgba[3]},set alpha(r){this.rgba[3]=r},get luminance(){for(var r=this.rgba.slice(),a=0;a<3;a++){var t=r[a];t=(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),r[a]=t}return.2126*r[0]+.7152*r[1]+.0722*r[2]},get inverse(){return new c([255-this.rgba[0],255-this.rgba[1],255-this.rgba[2],this.alpha])},toString:function(){return"rgb"+(this.alpha<1?"a":"")+"("+this.rgba.slice(0,1<=this.alpha?3:4).join(", ")+")"},clone:function(){return new c(this.rgba)},overlayOn:function(r){var a=this.clone(),t=this.alpha;if(1<=t)return a;for(var n=0;n<3;n++)a.rgba[n]=a.rgba[n]*t+r.rgba[n]*r.rgba[3]*(1-t);return a.rgba[3]=t+r.rgba[3]*(1-t),a},contrast:function(t){var n=this.alpha;if(1<=n){t.alpha<1&&(t=t.overlayOn(this));var r=this.luminance+.05,a=t.luminance+.05,i=r/a;return r<a&&(i=1/i),{ratio:i=floor(i,2),error:0,min:i,max:i}}var e=this.overlayOn(c.BLACK),o=this.overlayOn(c.WHITE),h=e.contrast(t).ratio,s=o.contrast(t).ratio,l=Math.max(h,s),u=this.rgb.map(function(r,a){return Math.min(Math.max(0,(t.rgb[a]-r*n)/(1-n)),255)});u=new c(u);var g=1;return e.luminance>t.luminance?g=h:o.luminance<t.luminance&&(g=s),{ratio:floor((g+l)/2,2),error:floor((l-g)/2,2),min:g,max:l,closest:u,farthest:o==l?c.WHITE:c.BLACK}}},c.BLACK=new c([0,0,0]),c.GRAY=new c([127.5,127.5,127.5]),c.WHITE=new c([255,255,255])}();